<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.sakila.mapper.StoreMapper">
	<!-- /on/storeList : 지점리스트 출력 (store x staff x address) -->
	<select id="selectStoreList" resultType="Map">
		SELECT 
			st.store_id	storeId
			, r1.staff_id staffId
			, r1.first_name firstName
			, r1.last_name lastName
			, r1.email
			, r1.address_id addressId
			, r1.address
			, r1.address2
			, r1.district
			, r1.phone
		FROM
		store st INNER JOIN (SELECT 
										s.store_id
										, s.staff_id
										, s.first_name
										, s.last_name
										, s.email
										, s.address_id
										, a.address
										, a.address2
										, a.district
										, a.phone
									FROM
									staff s INNER JOIN address a
									ON  s.address_id = a.address_id) r1
		ON st.store_id = r1.store_id;
	</select>

	<select id="selectStoreListByStaff"
			parameterType="int">
		SELECT store_id storeId FROM store
	</select>
</mapper>
	
	
	
